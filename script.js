let yogaPoses = [
    {
        name: 'Big Toe Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/big-toe-pose.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Chair Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Chair-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Dolphin Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/hp_263_10_bjk_fnl.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Eagle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/12/Eagle-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Extended Side Angle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Extended-Side-Angle_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Warrior II Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/12/Warrior-2_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'High Lunge',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/02/ginacaputohighlungeposepage.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Upward Salute',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/02/upward-salute-primary.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Bridge Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Bridge-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Warrior I Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/10/Warrior-1_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Corpse Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/10/Savasana_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Standing Half Forward Bend',
        imgURL: 'https://www.yogajournal.com/poses/standing-half-forward-bend/',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Legs Up the Wall Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/12/Legs-Up-the-Wall_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Pyramid Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/ccd04294.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Boat Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/10/Boat-Pose1_Andrew-Clark-1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Happy Baby Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/05/jan-15-home-practice-ananda-balasana-happy-baby-pose.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Side Plank Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Side-Plank-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Chair Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Chair-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Bound Angle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/12/Bound-Angle-Pose-Mod-1_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Head-to-Knee Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/Janu-Sirsasana_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Standing Split',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/06/two-fit-moms-in-standing-split.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Wide-Legged Standing Forward Bend',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/wide-legged-standing-forward-bend-primary.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Crow Pose / Crane Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/12/Crow-Pose-Crane-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Eight-Angle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2022/01/Eight-Angle-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Firefly Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/09/Firefly-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Four-Limbed Staff Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Chaturanga_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Peacock Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/05/peacock-master.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Plank Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/05/25-yoga-journal-2022-C-andrew-clark-BC8I9887_1-2.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Pose Dedicated to the Sage Koundinya I',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/05/25-yoga-journal-2022-C-andrew-clark-BC8I9887_1-2.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Pose Dedicated to the Sage Koundinya II',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/eka-pada-koundinyasana-coby-kozlowski.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Scale Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/scale-pose.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Shoulder-Pressing Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/05/bhujapidasana-shoulder-pressing-pose.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Side Crow Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/side-crow-primary.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Wild Thing',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2009/08/2yp_283_0205_fnl.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Extended Hand-to-Big-Toe Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2009/08/2yp_283_0205_fnl.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Half Moon Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/Half-Moon-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Handstand',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Handstand_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Dancer Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/Dancer-Pose-Lord-of-the-Dance_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Side-Reclining Leg Lift',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/06/side-reclining-leg-lift.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Supported Headstand',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/CCD06236-1-scaled.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Supported Shoulderstand',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/2anatomy_284_05_fnl.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Warrior III Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Warrior-3_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Bharadvajas Twist',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/CCD06138-scaled.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Half Lord of the Fishes Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/Half-Lord-of-the-Fishes-Mod-1_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Pose Dedicated to the Sage Marichi III',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/pose-dedicated-to-the-sage-marichi-iii_primary.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Rope Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/Rope-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Revolved Head-to-Knee Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/10/Revolved-Head-to-Knee-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Revolved Side Angle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/09/Revolved-Side-Angle-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Revolved Triangle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/10/Revolved-Triangle-Pose_Andrew-Clark.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Cow Face Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/CCD09958-scaled.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Easy Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/11/Easy-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Fire Log Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/fire-log-pose-agnistambhasana.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Reclining Bound Angle Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/hp_288_13_bjk2.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'One-Legged King Pigeon Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/06/one-legged-king-pigeon-i_getty.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Bow Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/09/Bow-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Camel Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2021/10/Camel-Pose_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Cobra Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/CCD09906-scaled.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Fish Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2017/01/fish-pose.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Half Frog Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2022/03/321-yoga-journal-2022-C-andrew-clark-BC8I0728_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'King Pigeon Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/2yogapedia_273_13_fnl.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Locust Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/CCD04564-scaled.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'One-Legged King Pigeon Pose II',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2008/05/one-legged-king-pigeon-ii-primary.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Sphinx Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/32anatomy_290_5169_bjk.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Wheel Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/Upward-Facing-Bow-Wheel_Andrew-Clark_1.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Upward Facing Two-Foot Staff Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/upward-facing-two-foot-staff-pose.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Upward-Facing Dog Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2007/08/upward-facing-dog-primary.jpg?crop=535:301&width=1070&enable=upscale',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Ear Pressure Pose',
        imgURL: 'https://cdn.doyou.com/wp/2013/11/Ear-Pressure-Pose-Karnapidasana.jpg',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Goddess Pose',
        imgURL: 'https://cdn.doyou.com/wp/2013/11/Goddess-Pose.jpg',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Embryo Pose',
        imgURL: 'https://cdn.doyou.com/wp/2013/11/Embryo-Pose-Yoga.jpg',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Bound Lotus',
        imgURL: 'https://cdn.doyou.com/wp/2013/11/Bound-Lotus-Pose-Yoga.jpg',
        chair: false,
        difficulty: 0
    },
    {
        name: 'Super Soldier Pose',
        imgURL: 'https://www.yogajournal.com/wp-content/uploads/2016/05/super-soldier-pose.jpg?width=730',
        chair: false,
        difficulty: 0
    }
]

const muteBtn = document.querySelector('#mute');
let isPlay = true;
muteBtn.addEventListener('click', () => {
    if (isPlay) {
        stop();
    } else {
        start();
    }
    isPlay = !isPlay;
});

const music = document.querySelector('audio');

const stop = () => {
    music.pause();
}

const start = () => {
    music.play();
}

const breakT = [5,10,15,20,25];
const breakLeast = 5;
const breakMax = 25;
const poseT = [25,30,35,40,45];
// const poseT = [3]; // change at the end to the other poseT (amt of time doing pose)
const poseLeast = 25;
const poseMax = 45;
let timeList = [];

let isBreak = false;

const submitbtn = document.querySelector('submitbt');
const chair = document.querySelectorAll('input[name = "has_chair"'); 
const intensity =  document.querySelectorAll('input[name = "intensity"');

// const form = document.querySelector('.inputform');
// console.log(form);
// form.addEventListener('submit', (e) => {
//     time.value = '';
// })

let windowURL = `${window.location.href}`;
let params = new URLSearchParams(windowURL.slice(windowURL.indexOf('?')));
let userInput;
if (params.has('user_time')) userInput = params.get('user_time')*60;
else userInput = 5*60;

for (let i=0; i<userInput;) {
    let time = 0;
    let index;
    if (isBreak) {
        if (breakLeast <= userInput-i && userInput-i <= breakMax)
        {
            timeList.push(userInput-i);
            break;
        }
        else {
            index = Math.floor(Math.random()*breakT.length);
            time = breakT[index];
        }
        isBreak = !isBreak;
    }
    else {
        if (poseLeast <= userInput-i && userInput-i <= poseMax) {
            timeList.push(userInput-i)
            break;
        }
        else {
            index = Math.floor(Math.random()*poseT.length);
            time = poseT[index];
        }
        isBreak = !isBreak;
    }
    timeList.push(time);
    i+=time;
}

isBreak = false;

const yogaPos = document.querySelector('h1');
const timeRemain = document.querySelector('h2');
const yogaImg = document.querySelector('img');

let counter = 5;
const initTimer = setInterval(()=> {
    if (counter<0) {
        clearInterval(initTimer);
        showYoga(0);
    }
    timeRemain.innerText = `Starts in ${counter} seconds`
    counter--;
}, 1000);

yogaPoses = shuffle(yogaPoses);

let curIndex = -1;

let timeElapsed = 0;

let endYog = false;

let showYoga = function(start) {
    curIndex++;
    counter = timeList[start];
    timeElapsed += counter;
    if (isBreak) {
        yogaPos.innerText = 'BREAK TIME';
        yogaImg.src = 'break.png';
    }
    else {
        if (curIndex >= yogaPoses.length) {
            curIndex = 0;
            yogaPoses = shuffle(yogaPoses);
        }
        yogaPos.innerText = yogaPoses[curIndex].name;
        yogaImg.src = yogaPoses[curIndex].imgURL;
    }
    const timer = setInterval(() => {
        if (counter<0)
        {
            isBreak = !isBreak;
            if (timeElapsed<userInput) showYoga(start+1);
            else {
                endYoga();
                endYog = true;
            }
            clearInterval(timer);
        }
        if (!endYog) timeRemain.innerText = `Time Remaining: ${counter}`
        counter--;
    }, 1000);
}




let endYoga = () => {
    yogaPos.innerText = 'head back to the home page :)';
    timeRemain.innerText = 'Finished!';
    yogaImg.src = '';
};

function shuffle(array) {
    let currentIndex = array.length,  randomIndex;

    // While there remain elements to shuffle.
    while (currentIndex != 0) {

        // Pick a remaining element.
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;

        // And swap it with the current element.
        [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]];
    }

    return array;
}

// for (let i=0; i<timeList.length; i++) {
//     if (isBreak) {

//     }
// }



// for (int i=0; i<timeList.length; i++) {

// }